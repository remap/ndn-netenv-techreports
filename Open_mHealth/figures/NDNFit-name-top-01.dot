graph top {

node [shape=box]; 


root -- <<user_id>>; 
<<user_id>> -- category_ellipses;
<<user_id>> -- wellness;
<<user_id>> -- clinical;

root [shape=oval, label="org/openmhealth\n(nonroutable)", width=3];

category_ellipses [shape=plaintext,label="..."];

wellness -- auth;
wellness -- samples;
"??" -- identity;

wellness -- config;
config -- sync_partners -- sync_partners_ellipses; 
sync_partners_ellipses [shape=plaintext,label="..."];


identity -- publisher -- physical_activity_cert -- physical_activity_cert_version-- user_cert;
identity -- ndnfit_viz -- ndnfit_viz_cert_version -- user_cert_2;
physical_activity_cert [label="physical_activity"];
physical_activity_cert_version [label="<version>"];
ndnfit_viz_cert_version [label="<version>"];
user_cert [shape=note, label="DATA\nuser cert\n(publisher)"];
user_cert_2 [shape=note, label="DATA\nuser cert\n(visualizer)"];


physical_activity_auth [label="physical_activity"];

auth -- physical_activity_auth -- auth_start_timestamp -- auth_end_timestamp -- auth_raw -- auth_location -- READ --  <<key_fingerprint>> -- auth_data_reader; 

auth_location -- WRITE;
auth_location -- "...";

auth_raw [label="raw"];
auth_location [label="location"]; 
auth_start_timestamp [label="<start_timestamp>"];

auth_start_timestamp [label="<duration>"];


auth_data_reader [shape=note, label="ENCRYPTED DATA\n decryption key"]; 

samples -- physical_activity -- raw_start_timestamp -- raw_end_timestamp -- raw -- location -- raw_data; 
raw_start_timestamp [label="<start_timestamp>"]; 
raw_end_timestamp [label="<duration>"]; 
raw_data [shape="note", label="SEGMENTED,\nENCRYPTED DATA\ntime-location record\n(JSON)"];

physical_activity -- sliced;
sliced -- bout -- <<sequence_index>> -- <<activity_class>>; 
<<activity_class>> -- activity_start_timestamp -- activity_end_timestamp -- sliced_data;
activity_start_timestamp [label="<start_timestamp>"];
activity_end_timestamp [label="<duration>"];
sliced_data [shape="note", label="SEGMENTED,\nENCRYPTED DATA\nactivity record\n(JSON)"];

sliced -- period -- sliced_start_timestamp -- sliced__end_timestamp -- sliced_time_lookup; 
sliced_start_timestamp [label="<start_timestamp>"];
sliced__end_timestamp [label="<duration>"];
sliced_time_lookup [shape=note, label="LINK\nsliced/\n<sequence_index>"]

}


